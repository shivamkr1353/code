<%- include('../partials/header.html'); -%>

<title>View Student Details</title>
<link href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.5.2/css/bootstrap.css" rel="stylesheet">
<link href="https://cdn.datatables.net/1.10.23/css/dataTables.bootstrap4.min.css" rel="stylesheet">
<link rel="stylesheet" href="../../css/tpo.css">
<!-- START: REPLACE YOUR OLD <style> BLOCK WITH THIS -->
<style>
    /* Fix for navbar cutoff */
    body {
        padding-top: 70px;
    }

    .status-dot {
        height: 12px;
        width: 12px;
        border-radius: 50%;
        display: inline-block;
        margin-right: 5px;
        box-shadow: 0 0 3px rgba(0,0,0,0.3);
    }
    .status-dot-green {
        background-color: #28a745; /* Green */
    }
    .status-dot-red {
        background-color: #dc3545; /* Red */
    }
</style>
<!-- END: REPLACEMENT <style> BLOCK -->
</head>
<body>
<%- include('partials/navbar.html'); -%>

<!-- Removed extra 



 tags -->

<div class="container-fluid">
<div class="row">
<div class="col-md-3"></div>
<div class="col-md-6">
<hr class="hl1">
<div class="page-header bg-light">
<h1 class="text-center">Students List</h1>
</div>
<hr class="hl1">
</div>
</div>

<!-- START: FIX FOR HORIZONTAL SCROLLING -->
<!-- Wrap the table in a 'table-responsive' div -->
<div class="table-responsive">
    <table id="example" class="table table-striped table-bordered" style="width:100%">
        <thead>
            <tr>
                <th>S.N</th>
                <th>Name</th>
                <th>Email</th>
                <th>Age</th>
                <th>City</th>
                <th>Gender</th>
                <th>Mobile</th>
                <th>Is Verified</th>
                <th>Department</th>
                <th>Passing Year</th>
                <th>10th Result</th>
                <th>12th Result</th>
                <th>Average CGPA</th>
                <th>Backlogs</th>
                <th>Resume</th> 
                <th>Status</th> <!-- ADDED STATUS HEADER -->
                <th>Action</th>
            </tr>
        </thead>
        <tbody>
            <% if (userData && userData.length > 0) { 
                userData.forEach(function(data, index) { %>
                    <tr>
                        <td><%= index + 1 %></td>
                        <td><%= data.sname || 'N/A' %></td>
                        <td><%= data.semail || 'N/A' %></td>
                        <td><%= data.age || 'N/A' %></td>
                        <td><%= data.city || 'N/A' %></td>
                        <td><%= data.gender || 'N/A' %></td>
                        <td><%= data.smobileno || 'N/A' %></td>
                        <td><%= data.isverified || 'N/A' %></td>
                        <td><%= data.dname || 'N/A' %></td>
                        <td><%= data.passingyear || 'N/A' %></td>
                        <td><%= data.result10 || 'N/A' %></td>
                        <td><%= data.result12 || 'N/A' %></td>
                        <td><%= data.avgcgpa || 'N/A' %></td>
                        <td><%= data.backlogs || 'N/A' %></td>
                        <td>
                            <% if (data.resume_url) { %>
                            <a href="<%= data.resume_url %>" class="btn btn-info btn-sm" target="_blank">
                                View
                            </a>
                            <% } else { %>
                            <span class="text-muted">N/A</span>
                            <% } %>
                        </td>
                        
                        <!-- ADDED STATUS DATA CELL -->
                        <td>
                            <% if (data.is_placed) { %>
                                <span class="status-dot status-dot-green" title="Placed"></span> Placed
                            <% } else { %>
                                <span class="status-dot status-dot-red" title="Not Placed"></span> Not Placed
                            <% } %>
                        </td>

                        <td><a href="/tpo/editstudent/<%= data.sid %>">Edit</a></td>
                    </tr>
                <% }); 
            } else { %>
                <tr>
                    <!-- Updated colspan from 16 to 17 -->
                    <td colspan="17">No Data Found</td>
                </tr>
            <% } %>
        </tbody>
        <tfoot>
            <tr>
                <th>S.N</th>
                <th>Name</th>
                <th>Email</th>
                <th>Age</th>
                <th>City</th>
                <th>Gender</th>
                <th>Mobile</th>
                <th>Is Verified</th>
                <th>Department</th>
                <th>Passing Year</th>
                <th>10th Result</th>
                <th>12th Result</th>
                <th>Average CGPA</th>
                <th>Backlogs</th>
                <th>Resume</th>
                <th>Status</th> <!-- ADDED STATUS FOOTER -->
                <th>Action</th>
            </tr>
        </tfoot>
    </table>
</div> <!-- END: 'table-responsive' div -->


</div>

<div class="container-fluid">







<footer class="container-fluid text-center bg-light">
<hr class="last">
<p>Copyright <i class="fa fa-copyright" aria-hidden="true"></i>
&nbsp;<script>document.write(new Date().getFullYear())</script>&nbsp;By Placement Management System</p>
</footer>
</div>

</body>

<script src="https://code.jquery.com/jquery-3.5.1.js"></script>

<script src="https://cdn.datatables.net/1.10.23/js/jquery.dataTables.min.js"></script>

<script src="https://cdn.datatables.net/1.10.23/js/dataTables.bootstrap4.min.js"></script>

<script>
$(document).ready(function () {
$('#example').DataTable();
});
</script>

<script src="https://code.jquery.com/ui/1.11.4/jquery-ui.min.js" integrity="sha256-xNjb53/rY+WmG+4L6tTl9m6PpqknWZvRt0rO1SRnJzw=" crossorigin="anonymous"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>

<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>

</html>